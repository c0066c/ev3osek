<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>EV3-OSEK: leJOS_EV3/src/ev3/i2c.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">EV3-OSEK
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_8ed1dde280f261b41bce9360cd3fdf32.html">leJOS_EV3</a></li><li class="navelem"><a class="el" href="dir_4ec2a68c26dfdc62fc66567ff851cecb.html">src</a></li><li class="navelem"><a class="el" href="dir_f628051c74760437d1b13574f9e26eb0.html">ev3</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">i2c.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Function definitions related to I2C communication.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="i2c_8h_source.html">i2c.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="soc___a_m1808_8h_source.html">soc_AM1808.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="systick_8h_source.html">systick.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="hw__syscfg0___a_m1808_8h_source.html">hw_syscfg0_AM1808.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="hw__gpio_8h_source.html">hw_gpio.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="digi__sensors_8h_source.html">digi_sensors.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="evm_a_m1808_8h_source.html">evmAM1808.h</a>&quot;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for i2c.c:</div>
<div class="dyncontent">
<div class="center"><img src="i2c_8c__incl.png" border="0" usemap="#le_j_o_s___e_v3_2src_2ev3_2i2c_8c" alt=""/></div>
<map name="le_j_o_s___e_v3_2src_2ev3_2i2c_8c" id="le_j_o_s___e_v3_2src_2ev3_2i2c_8c">
<area shape="rect" id="node2" href="i2c_8h.html" title="Function declarations related to I2C communication. " alt="" coords="5,80,56,107"/>
<area shape="rect" id="node4" href="soc___a_m1808_8h.html" title="This file contains the peripheral information for AM1808 SOC. " alt="" coords="80,80,189,107"/>
<area shape="rect" id="node5" href="systick_8h.html" title="This header contains function declarations required to manage the tick in milliseconds on the EV3..." alt="" coords="213,80,288,107"/>
<area shape="rect" id="node6" href="hw__syscfg0___a_m1808_8h.html" title="SYSCFG0 register definitions for AM1808. " alt="" coords="313,80,471,107"/>
<area shape="rect" id="node7" href="hw__gpio_8h.html" title="GPIO register definitions. " alt="" coords="495,80,577,107"/>
<area shape="rect" id="node8" href="digi__sensors_8h.html" title="Function declarations to talk to the digital sensors (I2C sensors) " alt="" coords="601,80,708,107"/>
<area shape="rect" id="node10" href="evm_a_m1808_8h.html" title="This file contains the board specific function prototypes for use by applications. " alt="" coords="732,80,839,107"/>
<area shape="rect" id="node3" href="mytypes_8h.html" title="This header defines the data types used in the leJOS driver. " alt="" coords="99,155,181,181"/>
<area shape="rect" id="node9" href="sensors_8h.html" title="This header contains macros for the sensor ports of the EV3. " alt="" coords="615,155,694,181"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a4c82e9c9d3280db703b1fe9f517940f1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4c82e9c9d3280db703b1fe9f517940f1"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a4c82e9c9d3280db703b1fe9f517940f1">I2C_N_PORTS</a>&#160;&#160;&#160;4</td></tr>
<tr class="memdesc:a4c82e9c9d3280db703b1fe9f517940f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">The amount of I2C ports on the EV3. <br /></td></tr>
<tr class="separator:a4c82e9c9d3280db703b1fe9f517940f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78852e3bc0b4671c9ffe43860706074d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a78852e3bc0b4671c9ffe43860706074d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a78852e3bc0b4671c9ffe43860706074d">I2C_N_RETRIES</a>&#160;&#160;&#160;3</td></tr>
<tr class="memdesc:a78852e3bc0b4671c9ffe43860706074d"><td class="mdescLeft">&#160;</td><td class="mdescRight">The amount of maximum retries before an I2C transaction fails. <br /></td></tr>
<tr class="separator:a78852e3bc0b4671c9ffe43860706074d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2644a996d617bb0de1e5e546d06a6330"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2644a996d617bb0de1e5e546d06a6330"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a2644a996d617bb0de1e5e546d06a6330">PINMUX0Register</a>&#160;&#160;&#160;*(unsigned int *)(<a class="el" href="soc___a_m1808_8h.html#adeb0aa716e4aa3fb5f0815e12649c7fc">SOC_SYSCFG_0_REGS</a> + SYSCFG0_PINMUX(0))</td></tr>
<tr class="memdesc:a2644a996d617bb0de1e5e546d06a6330"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pin-multiplexing register 0. <br /></td></tr>
<tr class="separator:a2644a996d617bb0de1e5e546d06a6330"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2cd86b41d228a4c6d70117096341e6a1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2cd86b41d228a4c6d70117096341e6a1"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a2cd86b41d228a4c6d70117096341e6a1">PINMUX1Register</a>&#160;&#160;&#160;*(unsigned int *)(<a class="el" href="soc___a_m1808_8h.html#adeb0aa716e4aa3fb5f0815e12649c7fc">SOC_SYSCFG_0_REGS</a> + SYSCFG0_PINMUX(1))</td></tr>
<tr class="memdesc:a2cd86b41d228a4c6d70117096341e6a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pin-multiplexing register 1. <br /></td></tr>
<tr class="separator:a2cd86b41d228a4c6d70117096341e6a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af32b6a55602f7f82c45624f58e77cc11"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af32b6a55602f7f82c45624f58e77cc11"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#af32b6a55602f7f82c45624f58e77cc11">PINMUX2Register</a>&#160;&#160;&#160;*(unsigned int *)(<a class="el" href="soc___a_m1808_8h.html#adeb0aa716e4aa3fb5f0815e12649c7fc">SOC_SYSCFG_0_REGS</a> + SYSCFG0_PINMUX(2))</td></tr>
<tr class="memdesc:af32b6a55602f7f82c45624f58e77cc11"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pin-multiplexing register 2. <br /></td></tr>
<tr class="separator:af32b6a55602f7f82c45624f58e77cc11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad309ccd78d81f5dcd00a5a1b46acafe4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad309ccd78d81f5dcd00a5a1b46acafe4"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#ad309ccd78d81f5dcd00a5a1b46acafe4">MASK_PORT_1_PINMUX0_CLEAR</a>&#160;&#160;&#160;0xFFFFFFF0</td></tr>
<tr class="memdesc:ad309ccd78d81f5dcd00a5a1b46acafe4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bitmask to clear the half-byte representing the pin-multiplexing configuration for Port 1 (SDA) <br /></td></tr>
<tr class="separator:ad309ccd78d81f5dcd00a5a1b46acafe4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6fdd16205aed3b2d9ac31771f31da34d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6fdd16205aed3b2d9ac31771f31da34d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a6fdd16205aed3b2d9ac31771f31da34d">MASK_PORT_1_PINMUX0_SET</a>&#160;&#160;&#160;0x00000008</td></tr>
<tr class="memdesc:a6fdd16205aed3b2d9ac31771f31da34d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bitmask to set the half-byte representing the pin-multiplexing configuration for Port 1 (SDA) <br /></td></tr>
<tr class="separator:a6fdd16205aed3b2d9ac31771f31da34d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21cf8bc598149428424197b22a3c78c5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a21cf8bc598149428424197b22a3c78c5"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a21cf8bc598149428424197b22a3c78c5">MASK_PORT_1_PINMUX1_CLEAR</a>&#160;&#160;&#160;0xFF0FFFFF</td></tr>
<tr class="memdesc:a21cf8bc598149428424197b22a3c78c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bitmask to clear the half-byte representing the pin-multiplexing configuration for Port 1 (SCL) <br /></td></tr>
<tr class="separator:a21cf8bc598149428424197b22a3c78c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62b5aa2d733b4da7b34ff6f8f3690425"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a62b5aa2d733b4da7b34ff6f8f3690425"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a62b5aa2d733b4da7b34ff6f8f3690425">MASK_PORT_1_PINMUX1_SET</a>&#160;&#160;&#160;0x00800000</td></tr>
<tr class="memdesc:a62b5aa2d733b4da7b34ff6f8f3690425"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bitmask to set the half-byte representing the pin-multiplexing configuration for Port 1 (SCL) <br /></td></tr>
<tr class="separator:a62b5aa2d733b4da7b34ff6f8f3690425"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a405be9f269b5b1687581410c340b7b7e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a405be9f269b5b1687581410c340b7b7e"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a405be9f269b5b1687581410c340b7b7e">MASK_PORT_2_PINMUX0_CLEAR</a>&#160;&#160;&#160;0xFFFFF00F</td></tr>
<tr class="memdesc:a405be9f269b5b1687581410c340b7b7e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bitmask to clear both half-bytes representing the pin-multiplexing configuration for Port 2 (SDA and SCL) <br /></td></tr>
<tr class="separator:a405be9f269b5b1687581410c340b7b7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24e3f65310efa2e2883cefeb635ea411"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a24e3f65310efa2e2883cefeb635ea411"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a24e3f65310efa2e2883cefeb635ea411">MASK_PORT_2_PINMUX0_SET</a>&#160;&#160;&#160;0x00000880</td></tr>
<tr class="memdesc:a24e3f65310efa2e2883cefeb635ea411"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bitmask to set both half-bytes representing the pin-multiplexing configuration for Port 2 (SDA and SCL) <br /></td></tr>
<tr class="separator:a24e3f65310efa2e2883cefeb635ea411"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa606c27c80bd34b29addc9d6bc1f9d93"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa606c27c80bd34b29addc9d6bc1f9d93"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#aa606c27c80bd34b29addc9d6bc1f9d93">MASK_PORT_3_PINMUX0_CLEAR</a>&#160;&#160;&#160;0xFFFF0FFF</td></tr>
<tr class="memdesc:aa606c27c80bd34b29addc9d6bc1f9d93"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bitmask to clear the half-byte representing the pin-multiplexing configuration for Port 3 (SDA) <br /></td></tr>
<tr class="separator:aa606c27c80bd34b29addc9d6bc1f9d93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a483d545fe94eb1840ffc92893a8fdf51"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a483d545fe94eb1840ffc92893a8fdf51"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a483d545fe94eb1840ffc92893a8fdf51">MASK_PORT_3_PINMUX0_SET</a>&#160;&#160;&#160;0x00008000</td></tr>
<tr class="memdesc:a483d545fe94eb1840ffc92893a8fdf51"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bitmask to set the half-byte representing the pin-multiplexing configuration for Port 3 (SDA) <br /></td></tr>
<tr class="separator:a483d545fe94eb1840ffc92893a8fdf51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab749281beb38fd41639382e87760c45d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab749281beb38fd41639382e87760c45d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#ab749281beb38fd41639382e87760c45d">MASK_PORT_3_PINMUX2_CLEAR</a>&#160;&#160;&#160;0xFFFFFF0F</td></tr>
<tr class="memdesc:ab749281beb38fd41639382e87760c45d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bitmask to clear the half-byte representing the pin-multiplexing configuration for Port 3 (SCL) <br /></td></tr>
<tr class="separator:ab749281beb38fd41639382e87760c45d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a316755071c6d25cf8b77c0c81d676461"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a316755071c6d25cf8b77c0c81d676461"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a316755071c6d25cf8b77c0c81d676461">MASK_PORT_3_PINMUX2_SET</a>&#160;&#160;&#160;0x00000040</td></tr>
<tr class="memdesc:a316755071c6d25cf8b77c0c81d676461"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bitmask to set the half-byte representing the pin-multiplexing configuration for Port 3 (SCL) <br /></td></tr>
<tr class="separator:a316755071c6d25cf8b77c0c81d676461"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa54533daa7bc8637593b0b09eabc1d9d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa54533daa7bc8637593b0b09eabc1d9d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#aa54533daa7bc8637593b0b09eabc1d9d">MASK_PORT_4_PINMUX1_CLEAR</a>&#160;&#160;&#160;0xF0FFFFFF</td></tr>
<tr class="memdesc:aa54533daa7bc8637593b0b09eabc1d9d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bitmask to clear the half-byte representing the pin-multiplexing configuration for Port 4 (SDA) <br /></td></tr>
<tr class="separator:aa54533daa7bc8637593b0b09eabc1d9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf6c3b4e372bed42757695a0b2da61f9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adf6c3b4e372bed42757695a0b2da61f9"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#adf6c3b4e372bed42757695a0b2da61f9">MASK_PORT_4_PINMUX1_SET</a>&#160;&#160;&#160;0x08000000</td></tr>
<tr class="memdesc:adf6c3b4e372bed42757695a0b2da61f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bitmask to set the half-byte representing the pin-multiplexing configuration for Port 4 (SDA) <br /></td></tr>
<tr class="separator:adf6c3b4e372bed42757695a0b2da61f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d7dd57a8fb6a4171c8c9a77a4539aa5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9d7dd57a8fb6a4171c8c9a77a4539aa5"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a9d7dd57a8fb6a4171c8c9a77a4539aa5">MASK_PORT_4_PINMUX2_CLEAR</a>&#160;&#160;&#160;0xFFFFFF0F</td></tr>
<tr class="memdesc:a9d7dd57a8fb6a4171c8c9a77a4539aa5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bitmask to clear the half-byte representing the pin-multiplexing configuration for Port 4 (SCL) <br /></td></tr>
<tr class="separator:a9d7dd57a8fb6a4171c8c9a77a4539aa5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9361e4fd686c5e30672551b993beb78c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9361e4fd686c5e30672551b993beb78c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a9361e4fd686c5e30672551b993beb78c">MASK_PORT_4_PINMUX2_SET</a>&#160;&#160;&#160;0x00000008</td></tr>
<tr class="memdesc:a9361e4fd686c5e30672551b993beb78c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bitmask to set the half-byte representing the pin-multiplexing configuration for Port 4 (SCL) <br /></td></tr>
<tr class="separator:a9361e4fd686c5e30672551b993beb78c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8094bb2eee3df60d7b7ff9c5fb8063e1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8094bb2eee3df60d7b7ff9c5fb8063e1"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a8094bb2eee3df60d7b7ff9c5fb8063e1">SetSDADirectionOutput</a>(port)&#160;&#160;&#160;*((unsigned int *)(<a class="el" href="soc___a_m1808_8h.html#adee61347c9497c7152e364bd8878872d">SOC_GPIO_0_REGS</a> + <a class="el" href="ninja_2gpio_8h.html#a7c5ce760b66800f1bb68aece60e0d586">GPIO_DIR</a>(port.SDA.gpio_registers))) &amp;= ~port.SDA_SET_CLEAR</td></tr>
<tr class="memdesc:a8094bb2eee3df60d7b7ff9c5fb8063e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the SDA pin of the specified port as an output pin. <br /></td></tr>
<tr class="separator:a8094bb2eee3df60d7b7ff9c5fb8063e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a904755786635de5d75cda0565ec3bdbe"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a904755786635de5d75cda0565ec3bdbe"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a904755786635de5d75cda0565ec3bdbe">SetSCLDirectionOutput</a>(port)&#160;&#160;&#160;*((unsigned int *)(<a class="el" href="soc___a_m1808_8h.html#adee61347c9497c7152e364bd8878872d">SOC_GPIO_0_REGS</a> + <a class="el" href="ninja_2gpio_8h.html#a7c5ce760b66800f1bb68aece60e0d586">GPIO_DIR</a>(port.SCL.gpio_registers))) &amp;= ~port.SCL_SET_CLEAR</td></tr>
<tr class="memdesc:a904755786635de5d75cda0565ec3bdbe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the SCL pin of the specified port as an output pin. <br /></td></tr>
<tr class="separator:a904755786635de5d75cda0565ec3bdbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6313c9096ed47c181f78bc9721208b62"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6313c9096ed47c181f78bc9721208b62"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a6313c9096ed47c181f78bc9721208b62">SetDirectionOutput</a>(port)&#160;&#160;&#160;(<a class="el" href="i2c_8c.html#a8094bb2eee3df60d7b7ff9c5fb8063e1">SetSDADirectionOutput</a>(port)); (<a class="el" href="i2c_8c.html#a904755786635de5d75cda0565ec3bdbe">SetSCLDirectionOutput</a>(port));</td></tr>
<tr class="memdesc:a6313c9096ed47c181f78bc9721208b62"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the SDA and SCL pins of the specified port as output pins. <br /></td></tr>
<tr class="separator:a6313c9096ed47c181f78bc9721208b62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae82822e8bea8d42e13f5385f109abbe1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae82822e8bea8d42e13f5385f109abbe1"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#ae82822e8bea8d42e13f5385f109abbe1">SetSDADirectionInput</a>(port)&#160;&#160;&#160;*((unsigned int *)(<a class="el" href="soc___a_m1808_8h.html#adee61347c9497c7152e364bd8878872d">SOC_GPIO_0_REGS</a> + <a class="el" href="ninja_2gpio_8h.html#a7c5ce760b66800f1bb68aece60e0d586">GPIO_DIR</a>(port.SDA.gpio_registers))) |= port.SDA_SET_CLEAR</td></tr>
<tr class="memdesc:ae82822e8bea8d42e13f5385f109abbe1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the SDA pin of the specified port as an input pin. <br /></td></tr>
<tr class="separator:ae82822e8bea8d42e13f5385f109abbe1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d3156004586db9109dfea9127b6b913"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4d3156004586db9109dfea9127b6b913"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a4d3156004586db9109dfea9127b6b913">SetSCLDirectionInput</a>(port)&#160;&#160;&#160;*((unsigned int *)(<a class="el" href="soc___a_m1808_8h.html#adee61347c9497c7152e364bd8878872d">SOC_GPIO_0_REGS</a> + <a class="el" href="ninja_2gpio_8h.html#a7c5ce760b66800f1bb68aece60e0d586">GPIO_DIR</a>(port.SCL.gpio_registers))) |= port.SCL_SET_CLEAR</td></tr>
<tr class="memdesc:a4d3156004586db9109dfea9127b6b913"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the SCL pin of the specified port as an input pin. <br /></td></tr>
<tr class="separator:a4d3156004586db9109dfea9127b6b913"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5af3d0019d953515b57f3f9e0f26017f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5af3d0019d953515b57f3f9e0f26017f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a5af3d0019d953515b57f3f9e0f26017f">SetDirectionInput</a>&#160;&#160;&#160;(<a class="el" href="i2c_8c.html#ae82822e8bea8d42e13f5385f109abbe1">SetSDADirectionInput</a>(port)); (<a class="el" href="i2c_8c.html#a4d3156004586db9109dfea9127b6b913">SetSCLDirectionInput</a>(port));</td></tr>
<tr class="memdesc:a5af3d0019d953515b57f3f9e0f26017f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the SDA and SCL pins of the specified port as input pins. <br /></td></tr>
<tr class="separator:a5af3d0019d953515b57f3f9e0f26017f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0b3d4d546d3ad4706c3b241fa9620c4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad0b3d4d546d3ad4706c3b241fa9620c4"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#ad0b3d4d546d3ad4706c3b241fa9620c4">SDASetDataRegister</a>(port)&#160;&#160;&#160;(unsigned int *)(<a class="el" href="soc___a_m1808_8h.html#adee61347c9497c7152e364bd8878872d">SOC_GPIO_0_REGS</a> + GPIO_SET_DATA(port.SDA.gpio_registers))</td></tr>
<tr class="memdesc:ad0b3d4d546d3ad4706c3b241fa9620c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to register required to set the SDA pin of the specified port high. <br /></td></tr>
<tr class="separator:ad0b3d4d546d3ad4706c3b241fa9620c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ba80cb4aa0caf6f9953d5e1bab395d6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0ba80cb4aa0caf6f9953d5e1bab395d6"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a0ba80cb4aa0caf6f9953d5e1bab395d6">SCLSetDataRegister</a>(port)&#160;&#160;&#160;(unsigned int *)(<a class="el" href="soc___a_m1808_8h.html#adee61347c9497c7152e364bd8878872d">SOC_GPIO_0_REGS</a> + GPIO_SET_DATA(port.SCL.gpio_registers))</td></tr>
<tr class="memdesc:a0ba80cb4aa0caf6f9953d5e1bab395d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to register required to set the SCL pin of the specified port high. <br /></td></tr>
<tr class="separator:a0ba80cb4aa0caf6f9953d5e1bab395d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d5ed9a796d3fb18e799605578a7dfe8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4d5ed9a796d3fb18e799605578a7dfe8"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a4d5ed9a796d3fb18e799605578a7dfe8">SDAClearDataRegister</a>(port)&#160;&#160;&#160;(unsigned int *)(<a class="el" href="soc___a_m1808_8h.html#adee61347c9497c7152e364bd8878872d">SOC_GPIO_0_REGS</a> + GPIO_CLR_DATA(port.SDA.gpio_registers))</td></tr>
<tr class="memdesc:a4d5ed9a796d3fb18e799605578a7dfe8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to register required to set the SCL pin of the specified port low. <br /></td></tr>
<tr class="separator:a4d5ed9a796d3fb18e799605578a7dfe8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4f596cff9e441cf6b7b64fd2b3bb75f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab4f596cff9e441cf6b7b64fd2b3bb75f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#ab4f596cff9e441cf6b7b64fd2b3bb75f">SCLClearDataRegister</a>(port)&#160;&#160;&#160;(unsigned int *)(<a class="el" href="soc___a_m1808_8h.html#adee61347c9497c7152e364bd8878872d">SOC_GPIO_0_REGS</a> + GPIO_CLR_DATA(port.SCL.gpio_registers))</td></tr>
<tr class="memdesc:ab4f596cff9e441cf6b7b64fd2b3bb75f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to register required to set the SCL pin of the specified port low. <br /></td></tr>
<tr class="separator:ab4f596cff9e441cf6b7b64fd2b3bb75f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedd989eebea0faa3af1a70caff66519a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aedd989eebea0faa3af1a70caff66519a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#aedd989eebea0faa3af1a70caff66519a">SDAInRegister</a>(port)&#160;&#160;&#160;(unsigned int *)(<a class="el" href="soc___a_m1808_8h.html#adee61347c9497c7152e364bd8878872d">SOC_GPIO_0_REGS</a> + GPIO_IN_DATA(port.SDA.gpio_registers))</td></tr>
<tr class="memdesc:aedd989eebea0faa3af1a70caff66519a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to register required to read the SDA pin of the specified port. <br /></td></tr>
<tr class="separator:aedd989eebea0faa3af1a70caff66519a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10809839c56bde7d41605ac9be56197b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a10809839c56bde7d41605ac9be56197b"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a10809839c56bde7d41605ac9be56197b">SCLInRegister</a>(port)&#160;&#160;&#160;(unsigned int *)(<a class="el" href="soc___a_m1808_8h.html#adee61347c9497c7152e364bd8878872d">SOC_GPIO_0_REGS</a> + GPIO_IN_DATA(port.SCL.gpio_registers))</td></tr>
<tr class="memdesc:a10809839c56bde7d41605ac9be56197b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to register required to read the SCL pin of the specified port. <br /></td></tr>
<tr class="separator:a10809839c56bde7d41605ac9be56197b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09156daef45b1a89448c5fc19b2fc93b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a09156daef45b1a89448c5fc19b2fc93b"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a09156daef45b1a89448c5fc19b2fc93b">SDA_HIGH</a>(port)&#160;&#160;&#160;(*(<a class="el" href="i2c_8c.html#ad0b3d4d546d3ad4706c3b241fa9620c4">SDASetDataRegister</a>(port))    |= port.SDA_SET_CLEAR);</td></tr>
<tr class="memdesc:a09156daef45b1a89448c5fc19b2fc93b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the SDA pin of the specified port high (needs to be configured as output) <br /></td></tr>
<tr class="separator:a09156daef45b1a89448c5fc19b2fc93b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1b23b4c5a6492cd412eb33f898e8948"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af1b23b4c5a6492cd412eb33f898e8948"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#af1b23b4c5a6492cd412eb33f898e8948">SDA_LOW</a>(port)&#160;&#160;&#160;(*(<a class="el" href="i2c_8c.html#a4d5ed9a796d3fb18e799605578a7dfe8">SDAClearDataRegister</a>(port))  &amp;= port.SDA_SET_CLEAR);</td></tr>
<tr class="memdesc:af1b23b4c5a6492cd412eb33f898e8948"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the SDA pin of the specified port low (needs to be configured as output) <br /></td></tr>
<tr class="separator:af1b23b4c5a6492cd412eb33f898e8948"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6fc104f15c3829998a7428ea69228593"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6fc104f15c3829998a7428ea69228593"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a6fc104f15c3829998a7428ea69228593">SCL_HIGH</a>(port)&#160;&#160;&#160;(*(<a class="el" href="i2c_8c.html#a0ba80cb4aa0caf6f9953d5e1bab395d6">SCLSetDataRegister</a>(port))    |= port.SCL_SET_CLEAR);</td></tr>
<tr class="memdesc:a6fc104f15c3829998a7428ea69228593"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the SCL pin of the specified port high (needs to be configured as output) <br /></td></tr>
<tr class="separator:a6fc104f15c3829998a7428ea69228593"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8946aee1d27a2e3ea8e6c3757a9ec2c5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8946aee1d27a2e3ea8e6c3757a9ec2c5"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a8946aee1d27a2e3ea8e6c3757a9ec2c5">SCL_LOW</a>(port)&#160;&#160;&#160;(*(<a class="el" href="i2c_8c.html#ab4f596cff9e441cf6b7b64fd2b3bb75f">SCLClearDataRegister</a>(port))  &amp;= port.SCL_SET_CLEAR);</td></tr>
<tr class="memdesc:a8946aee1d27a2e3ea8e6c3757a9ec2c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the SCL pin of the specified port low (needs to be configured as output) <br /></td></tr>
<tr class="separator:a8946aee1d27a2e3ea8e6c3757a9ec2c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a2152636b23cbe1aab14b651cf53669"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5a2152636b23cbe1aab14b651cf53669"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a5a2152636b23cbe1aab14b651cf53669">READ_SDA</a>(port)&#160;&#160;&#160;((*<a class="el" href="i2c_8c.html#aedd989eebea0faa3af1a70caff66519a">SDAInRegister</a>(port) &amp; port.SDA_SET_CLEAR) &gt; 0 ? 1 : 0)</td></tr>
<tr class="memdesc:a5a2152636b23cbe1aab14b651cf53669"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the SDA pin of the specified port (needs to be configured as input) <br /></td></tr>
<tr class="separator:a5a2152636b23cbe1aab14b651cf53669"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafe92870b0bb5db655d5b493f7c4b864"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aafe92870b0bb5db655d5b493f7c4b864"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#aafe92870b0bb5db655d5b493f7c4b864">READ_SCL</a>(port)&#160;&#160;&#160;((*<a class="el" href="i2c_8c.html#a10809839c56bde7d41605ac9be56197b">SCLInRegister</a>(port) &amp; port.SCL_SET_CLEAR) &gt; 0 ? 1 : 0)</td></tr>
<tr class="memdesc:aafe92870b0bb5db655d5b493f7c4b864"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the SCL pin of the specified port (needs to be configured as input) <br /></td></tr>
<tr class="separator:aafe92870b0bb5db655d5b493f7c4b864"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62249e384b997229a3e2ae74ade334e2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a62249e384b997229a3e2ae74ade334e2">DELAY</a>&#160;&#160;&#160;<a class="el" href="i2c_8c.html#a934965c0299a49add07af1b22db39a09">doDelay</a>(85);</td></tr>
<tr class="memdesc:a62249e384b997229a3e2ae74ade334e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delay the communication between two clock pulses.  <a href="#a62249e384b997229a3e2ae74ade334e2">More...</a><br /></td></tr>
<tr class="separator:a62249e384b997229a3e2ae74ade334e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a934965c0299a49add07af1b22db39a09"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a934965c0299a49add07af1b22db39a09">doDelay</a> (int time)</td></tr>
<tr class="memdesc:a934965c0299a49add07af1b22db39a09"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delay the communication between two clock pulses by counting from 0 to the specified value.  <a href="#a934965c0299a49add07af1b22db39a09">More...</a><br /></td></tr>
<tr class="separator:a934965c0299a49add07af1b22db39a09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a437ed48e34ac6e068bfc8ff0e0cda3ed"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a437ed48e34ac6e068bfc8ff0e0cda3ed">i2c_write_bit</a> (<a class="el" href="struct_i2_c___p_o_r_t.html">I2C_PORT</a> port, <a class="el" href="mytypes_8h.html#a3cb25ca6f51f003950f9625ff05536fc">U8</a> bit)</td></tr>
<tr class="memdesc:a437ed48e34ac6e068bfc8ff0e0cda3ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a bit by setting the SDA pin high or low.  <a href="#a437ed48e34ac6e068bfc8ff0e0cda3ed">More...</a><br /></td></tr>
<tr class="separator:a437ed48e34ac6e068bfc8ff0e0cda3ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0594ce53846cd61d3b066e12a082d49"><td class="memItemLeft" align="right" valign="top"><a class="el" href="mytypes_8h.html#a3cb25ca6f51f003950f9625ff05536fc">U8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#aa0594ce53846cd61d3b066e12a082d49">i2c_read_bit</a> (<a class="el" href="struct_i2_c___p_o_r_t.html">I2C_PORT</a> port)</td></tr>
<tr class="memdesc:aa0594ce53846cd61d3b066e12a082d49"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a bit by reading the signal on SDA.  <a href="#aa0594ce53846cd61d3b066e12a082d49">More...</a><br /></td></tr>
<tr class="separator:aa0594ce53846cd61d3b066e12a082d49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5672b3f97bcc480cfef2c4598112b215"><td class="memItemLeft" align="right" valign="top"><a class="el" href="mytypes_8h.html#a3cb25ca6f51f003950f9625ff05536fc">U8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a5672b3f97bcc480cfef2c4598112b215">i2c_write_byte</a> (<a class="el" href="struct_i2_c___p_o_r_t.html">I2C_PORT</a> port, <a class="el" href="mytypes_8h.html#a3cb25ca6f51f003950f9625ff05536fc">U8</a> byte)</td></tr>
<tr class="memdesc:a5672b3f97bcc480cfef2c4598112b215"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a byte.  <a href="#a5672b3f97bcc480cfef2c4598112b215">More...</a><br /></td></tr>
<tr class="separator:a5672b3f97bcc480cfef2c4598112b215"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a518ba2e761a5fdfe08ded5ba19f89d26"><td class="memItemLeft" align="right" valign="top"><a class="el" href="mytypes_8h.html#a3cb25ca6f51f003950f9625ff05536fc">U8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a518ba2e761a5fdfe08ded5ba19f89d26">i2c_read_byte</a> (<a class="el" href="struct_i2_c___p_o_r_t.html">I2C_PORT</a> port)</td></tr>
<tr class="memdesc:a518ba2e761a5fdfe08ded5ba19f89d26"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a byte.  <a href="#a518ba2e761a5fdfe08ded5ba19f89d26">More...</a><br /></td></tr>
<tr class="separator:a518ba2e761a5fdfe08ded5ba19f89d26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06d4ea5d35013c54b1c91651ed9e7a6d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a06d4ea5d35013c54b1c91651ed9e7a6d">i2c_send_start</a> (<a class="el" href="struct_i2_c___p_o_r_t.html">I2C_PORT</a> port)</td></tr>
<tr class="memdesc:a06d4ea5d35013c54b1c91651ed9e7a6d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send an I2C start signal.  <a href="#a06d4ea5d35013c54b1c91651ed9e7a6d">More...</a><br /></td></tr>
<tr class="separator:a06d4ea5d35013c54b1c91651ed9e7a6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a675a7be8d1be3812bbfbae4fb4868fe7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="mytypes_8h.html#a3cb25ca6f51f003950f9625ff05536fc">U8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a675a7be8d1be3812bbfbae4fb4868fe7">i2c_send_slave_address</a> (<a class="el" href="struct_i2_c___p_o_r_t.html">I2C_PORT</a> port, <a class="el" href="mytypes_8h.html#a3cb25ca6f51f003950f9625ff05536fc">U8</a> slave_address, <a class="el" href="mytypes_8h.html#a3cb25ca6f51f003950f9625ff05536fc">U8</a> read_write_bit)</td></tr>
<tr class="memdesc:a675a7be8d1be3812bbfbae4fb4868fe7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send the I2C slave address along with the read/write bit.  <a href="#a675a7be8d1be3812bbfbae4fb4868fe7">More...</a><br /></td></tr>
<tr class="separator:a675a7be8d1be3812bbfbae4fb4868fe7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6512ac4ff6a45def4900a659bee5dc1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#ac6512ac4ff6a45def4900a659bee5dc1">i2c_send_stop</a> (<a class="el" href="struct_i2_c___p_o_r_t.html">I2C_PORT</a> port)</td></tr>
<tr class="memdesc:ac6512ac4ff6a45def4900a659bee5dc1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send an I2C stop signal.  <a href="#ac6512ac4ff6a45def4900a659bee5dc1">More...</a><br /></td></tr>
<tr class="separator:ac6512ac4ff6a45def4900a659bee5dc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49173d8dccb25e8735985f8a2c79bc04"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a49173d8dccb25e8735985f8a2c79bc04">i2c_available</a> (int port, <a class="el" href="mytypes_8h.html#a811024d35b9b8a41095b1f583b649e56">U32</a> address)</td></tr>
<tr class="memdesc:a49173d8dccb25e8735985f8a2c79bc04"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if an I2C device with the given address is available at the specified with port.  <a href="#a49173d8dccb25e8735985f8a2c79bc04">More...</a><br /></td></tr>
<tr class="separator:a49173d8dccb25e8735985f8a2c79bc04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cb4750a8621c4e0d9b3aafd4af5230c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a4cb4750a8621c4e0d9b3aafd4af5230c">i2c_disable</a> (int port)</td></tr>
<tr class="memdesc:a4cb4750a8621c4e0d9b3aafd4af5230c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable an I2C port.  <a href="#a4cb4750a8621c4e0d9b3aafd4af5230c">More...</a><br /></td></tr>
<tr class="separator:a4cb4750a8621c4e0d9b3aafd4af5230c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0332fb23d14c50f230824b0123198784"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a0332fb23d14c50f230824b0123198784">i2c_enable</a> (int port)</td></tr>
<tr class="memdesc:a0332fb23d14c50f230824b0123198784"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable an I2C port.  <a href="#a0332fb23d14c50f230824b0123198784">More...</a><br /></td></tr>
<tr class="separator:a0332fb23d14c50f230824b0123198784"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5730d9445429351b9f750084c5cb5aae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a5730d9445429351b9f750084c5cb5aae">i2c_init</a> (void)</td></tr>
<tr class="memdesc:a5730d9445429351b9f750084c5cb5aae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the I2C module.  <a href="#a5730d9445429351b9f750084c5cb5aae">More...</a><br /></td></tr>
<tr class="separator:a5730d9445429351b9f750084c5cb5aae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af78781a3419670e75e0ea69bef1316b7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#af78781a3419670e75e0ea69bef1316b7">i2c_busy</a> (int port)</td></tr>
<tr class="memdesc:af78781a3419670e75e0ea69bef1316b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether an I2C port is currently busy or not.  <a href="#af78781a3419670e75e0ea69bef1316b7">More...</a><br /></td></tr>
<tr class="separator:af78781a3419670e75e0ea69bef1316b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ccf872ddce00bf2c601aaa14c005d8d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a1ccf872ddce00bf2c601aaa14c005d8d">i2c_start_transaction</a> (int port, <a class="el" href="mytypes_8h.html#a811024d35b9b8a41095b1f583b649e56">U32</a> address, int internal_address, int n_internal_address_bytes, <a class="el" href="mytypes_8h.html#a3cb25ca6f51f003950f9625ff05536fc">U8</a> *data, <a class="el" href="mytypes_8h.html#a811024d35b9b8a41095b1f583b649e56">U32</a> nbytes, int write)</td></tr>
<tr class="memdesc:a1ccf872ddce00bf2c601aaa14c005d8d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start a new I2C transaction AND wait until it's finished.  <a href="#a1ccf872ddce00bf2c601aaa14c005d8d">More...</a><br /></td></tr>
<tr class="separator:a1ccf872ddce00bf2c601aaa14c005d8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab5ef7cc3b11bed460a8ed1eab6298697"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_i2_c___p_o_r_t.html">I2C_PORT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#ab5ef7cc3b11bed460a8ed1eab6298697">ports_i2c</a> [<a class="el" href="i2c_8c.html#a4c82e9c9d3280db703b1fe9f517940f1">I2C_N_PORTS</a>]</td></tr>
<tr class="memdesc:ab5ef7cc3b11bed460a8ed1eab6298697"><td class="mdescLeft">&#160;</td><td class="mdescRight">This array stores information about the GPIO pins which represent SDA and SCL lines for the I2C communication.  <a href="#ab5ef7cc3b11bed460a8ed1eab6298697">More...</a><br /></td></tr>
<tr class="separator:ab5ef7cc3b11bed460a8ed1eab6298697"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Function definitions related to I2C communication. </p>
<p>I2C communication is required in order to interact with the digital sensors.</p>
<dl class="section author"><dt>Author</dt><dd>Tobias Schießl </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a62249e384b997229a3e2ae74ade334e2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DELAY&#160;&#160;&#160;<a class="el" href="i2c_8c.html#a934965c0299a49add07af1b22db39a09">doDelay</a>(85);</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delay the communication between two clock pulses. </p>
<p>Counting to 85 is the best value to get as close to the original Lego firmware as possible (meassured with an oscilloscope). With this value, we have a delay between 100 and 125 ns between two clock pulses. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a934965c0299a49add07af1b22db39a09"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void doDelay </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>time</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delay the communication between two clock pulses by counting from 0 to the specified value. </p>
<p>This approach is necessary since we cannot wait below 1 ms with our systick impplementation and this is far too slow for I2C communication.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">time</td><td>- Ther value up to which the counter will be incremented before returning</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>none </dd></dl>

</div>
</div>
<a class="anchor" id="a49173d8dccb25e8735985f8a2c79bc04"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int i2c_available </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mytypes_8h.html#a811024d35b9b8a41095b1f583b649e56">U32</a>&#160;</td>
          <td class="paramname"><em>address</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if an I2C device with the given address is available at the specified with port. </p>
<p>This function makes use of the internal register layout which is equal among all Lego/HiTechnic I2C sensors. On internal address 0x00, the product version if the sensor is stored. If we read this value and receive a 0, we can assume that no sensor is available since a product version of 0 makes no sense. So far this is the only way to figure out if a sensor is connected to the port. Since the SDA signal will default to 0 when configured as input, the ACK bit is not enough to check that. It would always be 0 and therefore we would assume that a device is ready.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>- The port in use </td></tr>
    <tr><td class="paramname">address</td><td>- The I2C slave address of the slave device</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if no device is available, 1 otherwise </dd></dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="i2c_8c_a49173d8dccb25e8735985f8a2c79bc04_cgraph.png" border="0" usemap="#i2c_8c_a49173d8dccb25e8735985f8a2c79bc04_cgraph" alt=""/></div>
<map name="i2c_8c_a49173d8dccb25e8735985f8a2c79bc04_cgraph" id="i2c_8c_a49173d8dccb25e8735985f8a2c79bc04_cgraph">
<area shape="rect" id="node2" href="i2c_8c.html#ac6512ac4ff6a45def4900a659bee5dc1" title="Send an I2C stop signal. " alt="" coords="180,5,287,32"/>
<area shape="rect" id="node3" href="systick_8c.html#a28abc49038576a107430e9beb1382272" title="Wait for the specified amount of time. " alt="" coords="173,56,293,83"/>
<area shape="rect" id="node4" href="i2c_8c.html#a06d4ea5d35013c54b1c91651ed9e7a6d" title="Send an I2C start signal. " alt="" coords="180,107,287,133"/>
<area shape="rect" id="node5" href="i2c_8c.html#a675a7be8d1be3812bbfbae4fb4868fe7" title="Send the I2C slave address along with the read/write bit. " alt="" coords="151,208,316,235"/>
<area shape="rect" id="node6" href="i2c_8c.html#a5672b3f97bcc480cfef2c4598112b215" title="Send a byte. " alt="" coords="364,208,471,235"/>
<area shape="rect" id="node11" href="i2c_8c.html#a518ba2e761a5fdfe08ded5ba19f89d26" title="Read a byte. " alt="" coords="366,259,469,285"/>
<area shape="rect" id="node7" href="i2c_8c.html#a437ed48e34ac6e068bfc8ff0e0cda3ed" title="Send a bit by setting the SDA pin high or low. " alt="" coords="519,208,613,235"/>
<area shape="rect" id="node8" href="i2c_8c.html#aa0594ce53846cd61d3b066e12a082d49" title="Read a bit by reading the signal on SDA. " alt="" coords="520,259,612,285"/>
<area shape="rect" id="node9" href="syscfg_8c.html#ad9852f17f940b3d76a65df9d28a18960" title="This function unlocks the write&#45;protection of the SYSCFG module. " alt="" coords="661,233,824,260"/>
<area shape="rect" id="node10" href="syscfg_8c.html#a94096dbe2e0e6102149173a8d10e1591" title="This function imposes write&#45;protection on the SYSCFG module. " alt="" coords="667,284,818,311"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af78781a3419670e75e0ea69bef1316b7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int i2c_busy </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check whether an I2C port is currently busy or not. </p>
<p>Since our I2C communication is currently not based on interrupts (as it is in the NXT version of the leJOS driver) a port is never busy. Therefore this function will always return 0.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>- The port to check</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Always 0 since our port can never be busy (no transaction will be pending) </dd></dl>

</div>
</div>
<a class="anchor" id="a4cb4750a8621c4e0d9b3aafd4af5230c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void i2c_disable </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disable an I2C port. </p>
<p>This function currently has no functionality and therefore it is not necessary to call it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>- The port to disable</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>none </dd></dl>

</div>
</div>
<a class="anchor" id="a0332fb23d14c50f230824b0123198784"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void i2c_enable </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable an I2C port. </p>
<p>Enabling a port means configuring the corresponding pin-multiplexing registers and setting the pins as output pins with a high signal.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>- The port to disable</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>none </dd></dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="i2c_8c_a0332fb23d14c50f230824b0123198784_cgraph.png" border="0" usemap="#i2c_8c_a0332fb23d14c50f230824b0123198784_cgraph" alt=""/></div>
<map name="i2c_8c_a0332fb23d14c50f230824b0123198784_cgraph" id="i2c_8c_a0332fb23d14c50f230824b0123198784_cgraph">
<area shape="rect" id="node2" href="syscfg_8c.html#ad9852f17f940b3d76a65df9d28a18960" title="This function unlocks the write&#45;protection of the SYSCFG module. " alt="" coords="137,5,300,32"/>
<area shape="rect" id="node3" href="syscfg_8c.html#a94096dbe2e0e6102149173a8d10e1591" title="This function imposes write&#45;protection on the SYSCFG module. " alt="" coords="143,56,294,83"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a5730d9445429351b9f750084c5cb5aae"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void i2c_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the I2C module. </p>
<p>This function currently has no functionality and therefore it is not necessary to call it.</p>
<dl class="section return"><dt>Returns</dt><dd>none </dd></dl>

</div>
</div>
<a class="anchor" id="aa0594ce53846cd61d3b066e12a082d49"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="mytypes_8h.html#a3cb25ca6f51f003950f9625ff05536fc">U8</a> i2c_read_bit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_i2_c___p_o_r_t.html">I2C_PORT</a>&#160;</td>
          <td class="paramname"><em>port</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read a bit by reading the signal on SDA. </p>
<p>Only the last bit of the returned byte should be considered (LSB). All other bits will be 0. This function will set SDA as an input pin in order to give the control to the slave device (sensor). The pin will be reset to output before returning from this function. SCL should be low before calling this function and will be low again after returning from it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>- The port in use</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The bit red (LSB of the returned byte) </dd></dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="i2c_8c_aa0594ce53846cd61d3b066e12a082d49_cgraph.png" border="0" usemap="#i2c_8c_aa0594ce53846cd61d3b066e12a082d49_cgraph" alt=""/></div>
<map name="i2c_8c_aa0594ce53846cd61d3b066e12a082d49_cgraph" id="i2c_8c_aa0594ce53846cd61d3b066e12a082d49_cgraph">
<area shape="rect" id="node2" href="syscfg_8c.html#ad9852f17f940b3d76a65df9d28a18960" title="This function unlocks the write&#45;protection of the SYSCFG module. " alt="" coords="145,5,308,32"/>
<area shape="rect" id="node3" href="syscfg_8c.html#a94096dbe2e0e6102149173a8d10e1591" title="This function imposes write&#45;protection on the SYSCFG module. " alt="" coords="151,56,302,83"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a518ba2e761a5fdfe08ded5ba19f89d26"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="mytypes_8h.html#a3cb25ca6f51f003950f9625ff05536fc">U8</a> i2c_read_byte </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_i2_c___p_o_r_t.html">I2C_PORT</a>&#160;</td>
          <td class="paramname"><em>port</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read a byte. </p>
<p>The byte will be red by reading it bit by bit. Therefore i2c_read_bit will be used. Before returning, this function will send an ACK bit to the slave device (sensor). SCL should be low before calling this function and will be low again after returning from it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>- The port in use</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The byte red </dd></dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="i2c_8c_a518ba2e761a5fdfe08ded5ba19f89d26_cgraph.png" border="0" usemap="#i2c_8c_a518ba2e761a5fdfe08ded5ba19f89d26_cgraph" alt=""/></div>
<map name="i2c_8c_a518ba2e761a5fdfe08ded5ba19f89d26_cgraph" id="i2c_8c_a518ba2e761a5fdfe08ded5ba19f89d26_cgraph">
<area shape="rect" id="node2" href="i2c_8c.html#aa0594ce53846cd61d3b066e12a082d49" title="Read a bit by reading the signal on SDA. " alt="" coords="157,31,249,57"/>
<area shape="rect" id="node5" href="i2c_8c.html#a437ed48e34ac6e068bfc8ff0e0cda3ed" title="Send a bit by setting the SDA pin high or low. " alt="" coords="156,81,251,108"/>
<area shape="rect" id="node3" href="syscfg_8c.html#ad9852f17f940b3d76a65df9d28a18960" title="This function unlocks the write&#45;protection of the SYSCFG module. " alt="" coords="299,5,461,32"/>
<area shape="rect" id="node4" href="syscfg_8c.html#a94096dbe2e0e6102149173a8d10e1591" title="This function imposes write&#45;protection on the SYSCFG module. " alt="" coords="305,56,455,83"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a675a7be8d1be3812bbfbae4fb4868fe7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="mytypes_8h.html#a3cb25ca6f51f003950f9625ff05536fc">U8</a> i2c_send_slave_address </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_i2_c___p_o_r_t.html">I2C_PORT</a>&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mytypes_8h.html#a3cb25ca6f51f003950f9625ff05536fc">U8</a>&#160;</td>
          <td class="paramname"><em>slave_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mytypes_8h.html#a3cb25ca6f51f003950f9625ff05536fc">U8</a>&#160;</td>
          <td class="paramname"><em>read_write_bit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send the I2C slave address along with the read/write bit. </p>
<p>This is the first byte that has to be sent in an I2C transaction after sending the start signal. The slave address is a 7 bit address which gets shifted by 1 to the left inside this function. The last bit of the byte will be 1 if we want to write to the slave device (sensor), 0 if we want to read from it. SCL should be low before calling this function and will be low again after returning from it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>- The port in use </td></tr>
    <tr><td class="paramname">slave_address</td><td>- The slave address to use (unshifted) </td></tr>
    <tr><td class="paramname">read_write_bit</td><td>- The read/write bit (1 if we want to write to the slave device, 0 if we want to read from it)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The ACK bit received from the slave (0 for ACK and 1 for no ACK) </dd></dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="i2c_8c_a675a7be8d1be3812bbfbae4fb4868fe7_cgraph.png" border="0" usemap="#i2c_8c_a675a7be8d1be3812bbfbae4fb4868fe7_cgraph" alt=""/></div>
<map name="i2c_8c_a675a7be8d1be3812bbfbae4fb4868fe7_cgraph" id="i2c_8c_a675a7be8d1be3812bbfbae4fb4868fe7_cgraph">
<area shape="rect" id="node2" href="i2c_8c.html#a5672b3f97bcc480cfef2c4598112b215" title="Send a byte. " alt="" coords="219,31,325,57"/>
<area shape="rect" id="node3" href="i2c_8c.html#a437ed48e34ac6e068bfc8ff0e0cda3ed" title="Send a bit by setting the SDA pin high or low. " alt="" coords="373,5,468,32"/>
<area shape="rect" id="node4" href="i2c_8c.html#aa0594ce53846cd61d3b066e12a082d49" title="Read a bit by reading the signal on SDA. " alt="" coords="375,56,467,83"/>
<area shape="rect" id="node5" href="syscfg_8c.html#ad9852f17f940b3d76a65df9d28a18960" title="This function unlocks the write&#45;protection of the SYSCFG module. " alt="" coords="516,31,679,57"/>
<area shape="rect" id="node6" href="syscfg_8c.html#a94096dbe2e0e6102149173a8d10e1591" title="This function imposes write&#45;protection on the SYSCFG module. " alt="" coords="522,81,673,108"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a06d4ea5d35013c54b1c91651ed9e7a6d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void i2c_send_start </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_i2_c___p_o_r_t.html">I2C_PORT</a>&#160;</td>
          <td class="paramname"><em>port</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send an I2C start signal. </p>
<p>A start in an I2C transaction means setting SDA to 0 while SCL is 1. After calling this function, SDA and SCL will both be low.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>- The port in use</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>none </dd></dl>

</div>
</div>
<a class="anchor" id="ac6512ac4ff6a45def4900a659bee5dc1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void i2c_send_stop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_i2_c___p_o_r_t.html">I2C_PORT</a>&#160;</td>
          <td class="paramname"><em>port</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send an I2C stop signal. </p>
<p>A stop in an I2C transaction means setting SDA to 1 while SCL is 1. After calling this function, SDA and SCL will both be high.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>- The port in use</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>none </dd></dl>

</div>
</div>
<a class="anchor" id="a1ccf872ddce00bf2c601aaa14c005d8d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int i2c_start_transaction </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mytypes_8h.html#a811024d35b9b8a41095b1f583b649e56">U32</a>&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>internal_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n_internal_address_bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mytypes_8h.html#a3cb25ca6f51f003950f9625ff05536fc">U8</a> *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mytypes_8h.html#a811024d35b9b8a41095b1f583b649e56">U32</a>&#160;</td>
          <td class="paramname"><em>nbytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>write</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start a new I2C transaction AND wait until it's finished. </p>
<p>In contrast to the name of the function, this will not only start the I2C transaction. Instead, the whole transaction is processed before returning from this function. The name remains in order to be API-compatible with the NXT version of the leJOS driver. In this driver, the I2C communication was controlled using interrupts. Note: According to the I2C protocol, a write is represented by a 0 and not by a 1 as in this function call. This behaviour is intended an also to keep API-compatibility to the NXT version of the driver.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>- The port to use (0 to 3) </td></tr>
    <tr><td class="paramname">address</td><td>- The I2C slave address of the slave device </td></tr>
    <tr><td class="paramname">internal_address</td><td>- Internal register address of slave device to read from or write to </td></tr>
    <tr><td class="paramname">n_internal_address_bytes</td><td>- Size of the internal register address in bytes </td></tr>
    <tr><td class="paramname">data</td><td>- Buffer to store received data in or the data to send </td></tr>
    <tr><td class="paramname">nbytes</td><td>- Amount of bytes to receive or send, i.e. the length of the data array </td></tr>
    <tr><td class="paramname">write</td><td>- 1 if we want to write to the slave, 0 if we want to read from it</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if the transaction was successful, otherwise the number of the byte for which no ACK was received (beginning with 1) </dd></dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="i2c_8c_a1ccf872ddce00bf2c601aaa14c005d8d_cgraph.png" border="0" usemap="#i2c_8c_a1ccf872ddce00bf2c601aaa14c005d8d_cgraph" alt=""/></div>
<map name="i2c_8c_a1ccf872ddce00bf2c601aaa14c005d8d_cgraph" id="i2c_8c_a1ccf872ddce00bf2c601aaa14c005d8d_cgraph">
<area shape="rect" id="node2" href="i2c_8c.html#ac6512ac4ff6a45def4900a659bee5dc1" title="Send an I2C stop signal. " alt="" coords="225,5,332,32"/>
<area shape="rect" id="node3" href="systick_8c.html#a28abc49038576a107430e9beb1382272" title="Wait for the specified amount of time. " alt="" coords="219,56,339,83"/>
<area shape="rect" id="node4" href="i2c_8c.html#a06d4ea5d35013c54b1c91651ed9e7a6d" title="Send an I2C start signal. " alt="" coords="225,107,332,133"/>
<area shape="rect" id="node5" href="i2c_8c.html#a675a7be8d1be3812bbfbae4fb4868fe7" title="Send the I2C slave address along with the read/write bit. " alt="" coords="196,208,361,235"/>
<area shape="rect" id="node6" href="i2c_8c.html#a5672b3f97bcc480cfef2c4598112b215" title="Send a byte. " alt="" coords="409,208,516,235"/>
<area shape="rect" id="node11" href="i2c_8c.html#a518ba2e761a5fdfe08ded5ba19f89d26" title="Read a byte. " alt="" coords="411,259,514,285"/>
<area shape="rect" id="node7" href="i2c_8c.html#a437ed48e34ac6e068bfc8ff0e0cda3ed" title="Send a bit by setting the SDA pin high or low. " alt="" coords="564,208,659,235"/>
<area shape="rect" id="node8" href="i2c_8c.html#aa0594ce53846cd61d3b066e12a082d49" title="Read a bit by reading the signal on SDA. " alt="" coords="565,259,657,285"/>
<area shape="rect" id="node9" href="syscfg_8c.html#ad9852f17f940b3d76a65df9d28a18960" title="This function unlocks the write&#45;protection of the SYSCFG module. " alt="" coords="707,233,869,260"/>
<area shape="rect" id="node10" href="syscfg_8c.html#a94096dbe2e0e6102149173a8d10e1591" title="This function imposes write&#45;protection on the SYSCFG module. " alt="" coords="713,284,863,311"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a437ed48e34ac6e068bfc8ff0e0cda3ed"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void i2c_write_bit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_i2_c___p_o_r_t.html">I2C_PORT</a>&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mytypes_8h.html#a3cb25ca6f51f003950f9625ff05536fc">U8</a>&#160;</td>
          <td class="paramname"><em>bit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a bit by setting the SDA pin high or low. </p>
<p>Only the last bit of the given byte will be used (LSB). SCL should be low before calling this function and will be low again after returning from it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>- The port in use </td></tr>
    <tr><td class="paramname">bit</td><td>- The bit to write (only the LSB of the byte will be considered)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>none </dd></dl>

</div>
</div>
<a class="anchor" id="a5672b3f97bcc480cfef2c4598112b215"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="mytypes_8h.html#a3cb25ca6f51f003950f9625ff05536fc">U8</a> i2c_write_byte </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_i2_c___p_o_r_t.html">I2C_PORT</a>&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mytypes_8h.html#a3cb25ca6f51f003950f9625ff05536fc">U8</a>&#160;</td>
          <td class="paramname"><em>byte</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a byte. </p>
<p>The byte will be written by sending it bit by bit. Therefore i2c_write_bit will be used. SCL should be low before calling this function and will be low again after returning from it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>- The port in use </td></tr>
    <tr><td class="paramname">byte</td><td>- The byte to send</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The ACK bit received from the slave (0 for ACK and 1 for no ACK) </dd></dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="i2c_8c_a5672b3f97bcc480cfef2c4598112b215_cgraph.png" border="0" usemap="#i2c_8c_a5672b3f97bcc480cfef2c4598112b215_cgraph" alt=""/></div>
<map name="i2c_8c_a5672b3f97bcc480cfef2c4598112b215_cgraph" id="i2c_8c_a5672b3f97bcc480cfef2c4598112b215_cgraph">
<area shape="rect" id="node2" href="i2c_8c.html#a437ed48e34ac6e068bfc8ff0e0cda3ed" title="Send a bit by setting the SDA pin high or low. " alt="" coords="160,5,255,32"/>
<area shape="rect" id="node3" href="i2c_8c.html#aa0594ce53846cd61d3b066e12a082d49" title="Read a bit by reading the signal on SDA. " alt="" coords="161,56,253,83"/>
<area shape="rect" id="node4" href="syscfg_8c.html#ad9852f17f940b3d76a65df9d28a18960" title="This function unlocks the write&#45;protection of the SYSCFG module. " alt="" coords="303,31,465,57"/>
<area shape="rect" id="node5" href="syscfg_8c.html#a94096dbe2e0e6102149173a8d10e1591" title="This function imposes write&#45;protection on the SYSCFG module. " alt="" coords="309,81,459,108"/>
</map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="ab5ef7cc3b11bed460a8ed1eab6298697"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_i2_c___p_o_r_t.html">I2C_PORT</a> ports_i2c[<a class="el" href="i2c_8c.html#a4c82e9c9d3280db703b1fe9f517940f1">I2C_N_PORTS</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    {{0, 15}, {0, 2}, 0x00008000, 0x00000004},</div>
<div class="line">    {{0, 13}, {0, 14}, 0x00002000, 0x00004000},</div>
<div class="line">    {{0, 14}, {0, 12}, 0x40000000, 0x00001000},</div>
<div class="line">    {{0, 15}, {0, 1}, 0x80000000, 0x00000002}</div>
<div class="line">}</div>
</div><!-- fragment -->
<p>This array stores information about the GPIO pins which represent SDA and SCL lines for the I2C communication. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
