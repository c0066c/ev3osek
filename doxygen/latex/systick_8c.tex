\hypertarget{systick_8c}{}\section{le\+J\+O\+S\+\_\+\+E\+V3/src/ev3/systick.c File Reference}
\label{systick_8c}\index{le\+J\+O\+S\+\_\+\+E\+V3/src/ev3/systick.\+c@{le\+J\+O\+S\+\_\+\+E\+V3/src/ev3/systick.\+c}}


This header contains function definitions required to manage the tick in milliseconds on the E\+V3.  


{\ttfamily \#include \char`\"{}soc\+\_\+\+A\+M1808.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}hw\+\_\+syscfg0\+\_\+\+A\+M1808.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}timer.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}evm\+A\+M1808.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}cpu.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}systick.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}interrupt.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}stdio.\+h\char`\"{}}\\*
Include dependency graph for systick.\+c\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{systick_8c__incl}
\end{center}
\end{figure}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{systick_8c_a6522700c33ccc0d931d0aca8db0a1a1d}{T\+M\+R\+\_\+\+P\+E\+R\+I\+O\+D\+\_\+\+L\+S\+B32}~0x05\+C\+C
\begin{DoxyCompactList}\small\item\em The compare value to set for the 16 least significant bits of the hardware timer. \end{DoxyCompactList}\item 
\hypertarget{systick_8c_a312496c5d2467d6f710c3478d4e3ed38}{}\#define \hyperlink{systick_8c_a312496c5d2467d6f710c3478d4e3ed38}{T\+M\+R\+\_\+\+P\+E\+R\+I\+O\+D\+\_\+\+M\+S\+B32}~0x0\label{systick_8c_a312496c5d2467d6f710c3478d4e3ed38}

\begin{DoxyCompactList}\small\item\em The compare value to set for the 16 most significant bits of the hardware timer. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{systick_8c_a9384a5cdefadfc512c20d301c750ffba}{systick\+\_\+isr\+\_\+\+C} (void)
\begin{DoxyCompactList}\small\item\em The systick interrupt service routine (I\+S\+R) which will be called every millisecond. \end{DoxyCompactList}\item 
\hyperlink{mytypes_8h_a811024d35b9b8a41095b1f583b649e56}{U32} \hyperlink{systick_8c_acef982ce45bc326644139ebb22310c88}{systick\+\_\+get\+\_\+ms} (void)
\begin{DoxyCompactList}\small\item\em Get the current tick in milliseconds. \end{DoxyCompactList}\item 
void \hyperlink{systick_8c_a28abc49038576a107430e9beb1382272}{systick\+\_\+wait\+\_\+ms} (\hyperlink{mytypes_8h_a811024d35b9b8a41095b1f583b649e56}{U32} ms)
\begin{DoxyCompactList}\small\item\em Wait for the specified amount of time. \end{DoxyCompactList}\item 
void \hyperlink{systick_8c_ac2147799cf89c3d30d732ec9eabc3d36}{systick\+\_\+wait\+\_\+ns} (\hyperlink{mytypes_8h_a811024d35b9b8a41095b1f583b649e56}{U32} ns)
\begin{DoxyCompactList}\small\item\em Wait for the specified amount of time. \end{DoxyCompactList}\item 
void \hyperlink{systick_8c_ac816b9d61dad1fe749c8eb4c625320dd}{systick\+\_\+init} (void)
\begin{DoxyCompactList}\small\item\em Initialize the systick module, i.\+e. the hardware timer of the So\+C. \end{DoxyCompactList}\item 
void \hyperlink{systick_8c_a6bb784bfdb4023498819d1b26c2273a9}{systick\+\_\+suspend} (void)
\begin{DoxyCompactList}\small\item\em Disable the timer and therefore the systick. \end{DoxyCompactList}\item 
void \hyperlink{systick_8c_abd308166607c7424fb1ae67fb24cba5e}{systick\+\_\+resume} (void)
\begin{DoxyCompactList}\small\item\em Enable the timer and therefore the systick. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hypertarget{systick_8c_a0271253144e3765b92c5ca16d802ec50}{}volatile \hyperlink{mytypes_8h_a811024d35b9b8a41095b1f583b649e56}{U32} \hyperlink{systick_8c_a0271253144e3765b92c5ca16d802ec50}{systick\+\_\+ms} = 0\label{systick_8c_a0271253144e3765b92c5ca16d802ec50}

\begin{DoxyCompactList}\small\item\em The current tick in milliseconds. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
This header contains function definitions required to manage the tick in milliseconds on the E\+V3. 

The tick is provided by a hardware timer of the A\+M1808 So\+C which will trigger an interrupt every millisecond. The timer runs in 32 bit mode.

\begin{DoxyAuthor}{Author}
Tobias Schie√ül 
\end{DoxyAuthor}


\subsection{Macro Definition Documentation}
\hypertarget{systick_8c_a6522700c33ccc0d931d0aca8db0a1a1d}{}\index{systick.\+c@{systick.\+c}!T\+M\+R\+\_\+\+P\+E\+R\+I\+O\+D\+\_\+\+L\+S\+B32@{T\+M\+R\+\_\+\+P\+E\+R\+I\+O\+D\+\_\+\+L\+S\+B32}}
\index{T\+M\+R\+\_\+\+P\+E\+R\+I\+O\+D\+\_\+\+L\+S\+B32@{T\+M\+R\+\_\+\+P\+E\+R\+I\+O\+D\+\_\+\+L\+S\+B32}!systick.\+c@{systick.\+c}}
\subsubsection[{T\+M\+R\+\_\+\+P\+E\+R\+I\+O\+D\+\_\+\+L\+S\+B32}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+M\+R\+\_\+\+P\+E\+R\+I\+O\+D\+\_\+\+L\+S\+B32~0x05\+C\+C}\label{systick_8c_a6522700c33ccc0d931d0aca8db0a1a1d}


The compare value to set for the 16 least significant bits of the hardware timer. 

This is the value which causes the interrupt to be triggered every millisecond. 

\subsection{Function Documentation}
\hypertarget{systick_8c_acef982ce45bc326644139ebb22310c88}{}\index{systick.\+c@{systick.\+c}!systick\+\_\+get\+\_\+ms@{systick\+\_\+get\+\_\+ms}}
\index{systick\+\_\+get\+\_\+ms@{systick\+\_\+get\+\_\+ms}!systick.\+c@{systick.\+c}}
\subsubsection[{systick\+\_\+get\+\_\+ms(void)}]{\setlength{\rightskip}{0pt plus 5cm}{\bf U32} systick\+\_\+get\+\_\+ms (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\label{systick_8c_acef982ce45bc326644139ebb22310c88}


Get the current tick in milliseconds. 

\begin{DoxyReturn}{Returns}
The current tick in milliseconds 
\end{DoxyReturn}
\hypertarget{systick_8c_ac816b9d61dad1fe749c8eb4c625320dd}{}\index{systick.\+c@{systick.\+c}!systick\+\_\+init@{systick\+\_\+init}}
\index{systick\+\_\+init@{systick\+\_\+init}!systick.\+c@{systick.\+c}}
\subsubsection[{systick\+\_\+init(void)}]{\setlength{\rightskip}{0pt plus 5cm}void systick\+\_\+init (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\label{systick_8c_ac816b9d61dad1fe749c8eb4c625320dd}


Initialize the systick module, i.\+e. the hardware timer of the So\+C. 

This function will register the corresponding I\+S\+R, enable the timer interrupt and configure interrupt channel 2 (normal interrupt) for the hardware timer.

\begin{DoxyReturn}{Returns}
none 
\end{DoxyReturn}


Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{systick_8c_ac816b9d61dad1fe749c8eb4c625320dd_cgraph}
\end{center}
\end{figure}


\hypertarget{systick_8c_a9384a5cdefadfc512c20d301c750ffba}{}\index{systick.\+c@{systick.\+c}!systick\+\_\+isr\+\_\+\+C@{systick\+\_\+isr\+\_\+\+C}}
\index{systick\+\_\+isr\+\_\+\+C@{systick\+\_\+isr\+\_\+\+C}!systick.\+c@{systick.\+c}}
\subsubsection[{systick\+\_\+isr\+\_\+\+C(void)}]{\setlength{\rightskip}{0pt plus 5cm}void systick\+\_\+isr\+\_\+\+C (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\label{systick_8c_a9384a5cdefadfc512c20d301c750ffba}


The systick interrupt service routine (I\+S\+R) which will be called every millisecond. 

This I\+S\+R will increase the systick\+\_\+ms variable and reset the interrupt flags.

\begin{DoxyReturn}{Returns}
none 
\end{DoxyReturn}


Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=306pt]{systick_8c_a9384a5cdefadfc512c20d301c750ffba_cgraph}
\end{center}
\end{figure}


\hypertarget{systick_8c_abd308166607c7424fb1ae67fb24cba5e}{}\index{systick.\+c@{systick.\+c}!systick\+\_\+resume@{systick\+\_\+resume}}
\index{systick\+\_\+resume@{systick\+\_\+resume}!systick.\+c@{systick.\+c}}
\subsubsection[{systick\+\_\+resume(void)}]{\setlength{\rightskip}{0pt plus 5cm}void systick\+\_\+resume (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\label{systick_8c_abd308166607c7424fb1ae67fb24cba5e}


Enable the timer and therefore the systick. 

\begin{DoxyReturn}{Returns}
none 
\end{DoxyReturn}


Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=273pt]{systick_8c_abd308166607c7424fb1ae67fb24cba5e_cgraph}
\end{center}
\end{figure}


\hypertarget{systick_8c_a6bb784bfdb4023498819d1b26c2273a9}{}\index{systick.\+c@{systick.\+c}!systick\+\_\+suspend@{systick\+\_\+suspend}}
\index{systick\+\_\+suspend@{systick\+\_\+suspend}!systick.\+c@{systick.\+c}}
\subsubsection[{systick\+\_\+suspend(void)}]{\setlength{\rightskip}{0pt plus 5cm}void systick\+\_\+suspend (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\label{systick_8c_a6bb784bfdb4023498819d1b26c2273a9}


Disable the timer and therefore the systick. 

\begin{DoxyReturn}{Returns}
none 
\end{DoxyReturn}


Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=280pt]{systick_8c_a6bb784bfdb4023498819d1b26c2273a9_cgraph}
\end{center}
\end{figure}


\hypertarget{systick_8c_a28abc49038576a107430e9beb1382272}{}\index{systick.\+c@{systick.\+c}!systick\+\_\+wait\+\_\+ms@{systick\+\_\+wait\+\_\+ms}}
\index{systick\+\_\+wait\+\_\+ms@{systick\+\_\+wait\+\_\+ms}!systick.\+c@{systick.\+c}}
\subsubsection[{systick\+\_\+wait\+\_\+ms(\+U32 ms)}]{\setlength{\rightskip}{0pt plus 5cm}void systick\+\_\+wait\+\_\+ms (
\begin{DoxyParamCaption}
\item[{{\bf U32}}]{ms}
\end{DoxyParamCaption}
)}\label{systick_8c_a28abc49038576a107430e9beb1382272}


Wait for the specified amount of time. 

Waiting with this function is an active waiting which will block until the time has elapsed.


\begin{DoxyParams}{Parameters}
{\em ms} & -\/ The time to wait in milliseconds\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
none 
\end{DoxyReturn}
\hypertarget{systick_8c_ac2147799cf89c3d30d732ec9eabc3d36}{}\index{systick.\+c@{systick.\+c}!systick\+\_\+wait\+\_\+ns@{systick\+\_\+wait\+\_\+ns}}
\index{systick\+\_\+wait\+\_\+ns@{systick\+\_\+wait\+\_\+ns}!systick.\+c@{systick.\+c}}
\subsubsection[{systick\+\_\+wait\+\_\+ns(\+U32 ns)}]{\setlength{\rightskip}{0pt plus 5cm}void systick\+\_\+wait\+\_\+ns (
\begin{DoxyParamCaption}
\item[{{\bf U32}}]{ns}
\end{DoxyParamCaption}
)}\label{systick_8c_ac2147799cf89c3d30d732ec9eabc3d36}


Wait for the specified amount of time. 

Waiting with this function is an active waiting which will block until the time has elapsed.


\begin{DoxyParams}{Parameters}
{\em ns} & -\/ The time to wait in nanoseconds\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
none 
\end{DoxyReturn}
