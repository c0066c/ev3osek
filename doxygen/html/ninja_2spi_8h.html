<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>EV3-OSEK: leJOS_EV3/src/ev3/ninja/spi.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">EV3-OSEK
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_8ed1dde280f261b41bce9360cd3fdf32.html">leJOS_EV3</a></li><li class="navelem"><a class="el" href="dir_4ec2a68c26dfdc62fc66567ff851cecb.html">src</a></li><li class="navelem"><a class="el" href="dir_f628051c74760437d1b13574f9e26eb0.html">ev3</a></li><li class="navelem"><a class="el" href="dir_56bb3b8850cdbbebe5c98ece8dab465b.html">ninja</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">spi.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This header declares function required to interact with the SPI0 controller of the SoC which is connected to the ADC.  
<a href="#details">More...</a></p>
<div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="ninja_2spi_8h__dep__incl.png" border="0" usemap="#le_j_o_s___e_v3_2src_2ev3_2ninja_2spi_8hdep" alt=""/></div>
<map name="le_j_o_s___e_v3_2src_2ev3_2ninja_2spi_8hdep" id="le_j_o_s___e_v3_2src_2ev3_2ninja_2spi_8hdep">
<area shape="rect" id="node2" href="init_8c.html" title="This code is required in order to initialize the leJOS driver including all modules properly..." alt="" coords="5,102,175,129"/>
<area shape="rect" id="node3" href="adc_8c.html" title="This file contains function definitions to talk to the ADC. " alt="" coords="199,95,367,136"/>
<area shape="rect" id="node4" href="ninja_2spi_8c.html" title="This contains function definitions required to interact with the SPI0 controller of the SoC which is ..." alt="" coords="391,95,559,136"/>
</map>
</div>
</div>
<p><a href="ninja_2spi_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4bb7874eaf4a6b816c819510f0f331cb"><td class="memItemLeft" align="right" valign="top">unsigned short&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ninja_2spi_8h.html#a4bb7874eaf4a6b816c819510f0f331cb">spi_update</a> (unsigned short data)</td></tr>
<tr class="memdesc:a4bb7874eaf4a6b816c819510f0f331cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send data via the SPI0 controller and get an updated value received by the SPI0 controller.  <a href="#a4bb7874eaf4a6b816c819510f0f331cb">More...</a><br /></td></tr>
<tr class="separator:a4bb7874eaf4a6b816c819510f0f331cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae909944aa85ae98323073c628be541aa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ninja_2spi_8h.html#ae909944aa85ae98323073c628be541aa">spi_init</a> (void)</td></tr>
<tr class="memdesc:ae909944aa85ae98323073c628be541aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the SPI0 controller and the required GPIO pins.  <a href="#ae909944aa85ae98323073c628be541aa">More...</a><br /></td></tr>
<tr class="separator:ae909944aa85ae98323073c628be541aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This header declares function required to interact with the SPI0 controller of the SoC which is connected to the ADC. </p>
<dl class="section author"><dt>Author</dt><dd>ev3ninja </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ae909944aa85ae98323073c628be541aa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void spi_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the SPI0 controller and the required GPIO pins. </p>
<p>For the GPIO pins, the SPI functionality will be set instead of the GPIO functionality.</p>
<dl class="section return"><dt>Returns</dt><dd>none </dd></dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ninja_2spi_8h_ae909944aa85ae98323073c628be541aa_cgraph.png" border="0" usemap="#ninja_2spi_8h_ae909944aa85ae98323073c628be541aa_cgraph" alt=""/></div>
<map name="ninja_2spi_8h_ae909944aa85ae98323073c628be541aa_cgraph" id="ninja_2spi_8h_ae909944aa85ae98323073c628be541aa_cgraph">
<area shape="rect" id="node2" href="ninja_2gpio_8c.html#a8cc18d800719367f95a7c1b1496e4267" title="Initialize a GPIO pin with its GPIO functionality. " alt="" coords="116,5,211,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4bb7874eaf4a6b816c819510f0f331cb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned short spi_update </td>
          <td>(</td>
          <td class="paramtype">unsigned short&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send data via the SPI0 controller and get an updated value received by the SPI0 controller. </p>
<p>Since the SPI0 controller is configured for chip select 3 only, all data sent and received will be to or from the ADC. According to the documentation of the ADC, the selected channel (0 to 15) will be probed and returned on frame n+2. Therefore, the command is sent 3 times and only the third value received is returned to the caller of this function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>- The data to send (since this is data to the ADC, check the ADC documentation for possible commands that can be sent)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The value received from the ADC after sending the data 3 times </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
